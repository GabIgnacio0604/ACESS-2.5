<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard</title>
  <link rel="stylesheet" href="../CSS/ACESS_Dashboard.css" />
  <link rel="stylesheet" href="../CSS/ACESS_Universal_Sidebar.css" />
  <script src="../JS/config.js"></script>
</head>

<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <a href="ACESS_Admin_Dashboard.html">
        <img src="../Images/School_Logo.jpg" alt="Logo" class="logo" />
      </a>
      <p class="account-name" id="account-name">Loading...</p>
      <nav class="sidebar-nav">
        <a href="ACESS_Admin_Club.html">
          👥 Club
        </a>
        <a href="ACESS_Student_Council.html">
          🏛️ Student Council
        </a>
        <a href="ACESS_Messages.html">
          💬 Messages
        </a>
        <a href="ACESS_AccountManagement.html">
          👤 Account Management
        </a>
      </nav>
      <button class="logout-btn" id="logoutButton">Logout</button>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Topbar -->
      <div class="topbar">
        <button class="menu-toggle" id="menu-toggle">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <span class="announcements-title">ANNOUNCEMENTS</span>
      </div>

      <!-- Upload Announcement Banner -->
      <section class="upload-banner">
        <h3>Upload Announcement Banner</h3>
        <input type="file" id="bannerUpload" accept="image/*" />
        <button id="uploadBtn">Upload</button>
        <button id="deleteBannerBtn">🗑 Delete Banner</button>
      </section>

      <!-- Announcement Banner -->
      <section class="announcement-banner">
        <div class="banner-content">
          <p>Announcement Banner</p>
          <p>Banner Image Limit Height: 500px Width: 1000px</p>
          <button class="arrow arrow--left" id="bannerPrev" aria-label="Previous Banner">←</button>
          <img id="bannerImage" src="https://via.placeholder.com/1100x300?text=Announcement+Banner" alt="Banner" />
          <button class="arrow arrow--right" id="bannerNext" aria-label="Next Banner">→</button>
        </div>
      </section>

      <!-- Events & Club Announcements -->
      <section class="info-panels">
        <div class="panel" id="eventsPanel">
          <h3>Events <button class="edit-btn" data-type="event">✎ Edit</button></h3>
          <ul id="eventsList"></ul>
        </div>
        <div class="panel" id="announcementsPanel">
          <h3>Club Announcements <button class="edit-btn" data-type="announcement">✎ Edit</button></h3>
          <ul id="announcementsList"></ul>
        </div>
      </section>
    </main>
  </div>
<script src="../JS/session_manager.js"></script>
  <script type="module" src="../Admin/JS/ui.js"></script>
  <script src="../Admin/JS/banner.js"></script>
  <script src="../JS/banner.js"></script>
  <script src="../JS/main.js"></script>
  <script src="../JS/delete_items.js"></script>
  <script src="../JS/sidebar.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const nameElement = document.querySelector(".account-name");

      try {
        const res = await fetch("Php/get_logged_user.php");
        const data = await res.json();

        if (data.fullname) {
          nameElement.textContent = data.fullname;
        } else {
          nameElement.textContent = "Not Logged In";
          console.error("Error fetching name:", data.error);
        }
      } catch (err) {
        console.error("Fetch failed:", err);
        nameElement.textContent = "Error";
      }
    });
  </script>
</body>

</html>